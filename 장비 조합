javascript: (async function() { var skipGearList = /Y|X|H\+/; var allGearData = await jQuery.getJSON('https://ya9.naver.com/gmc/loadcommondata.nhn?name=gears'); async function exchangeGear(bp, go) { if (go) { var raw = await jQuery.get('https://ya9.naver.com/gmc/getgearlist.nhn?bpcode=' + bp); var myGearData = new DOMParser().parseFromString("<html><body><table>" + raw + "</table></body></html>", 'text/html'); var myGearArray = Array.from(myGearData.getElementsByTagName('tr')); var availGearArray = myGearArray.filter(gear => !gear.children[1].innerText.match(skipGearList)); for (let i = 1; i < 8; i++) { var firstSeq = ""; var firstName = ""; var secondSeq = ""; var secondName = ""; for (let gear of availGearArray) { if (allGearData[gear.getAttribute('gid')].level == i) { firstSeq = gear.getAttribute('seq'); firstName = gear.children[1].innerText; } else if (allGearData[gear.getAttribute('gid')].level == i + 1) { secondSeq = gear.getAttribute('seq'); secondName = gear.children[1].innerText; } } if (firstSeq.length && secondSeq.length) { var result = await jQuery.get('https://ya9.naver.com/gmc/exchangegear.nhn?bpcode=' + bp + '&gearSeqs=' + firstSeq + '&gearSeqs=' + secondSeq); console.log(firstName + " (레벨 " + i + ") \+ " + secondName + " (레벨 " + (i + 1) + ") => " + result.name + " (레벨 " + result.level + ")"); if (result.level <= i) { console.log("LEVEL DOWN.."); } else if (result.level >= i + 2) { console.log("LEVEL UP!!"); } break; } if (i == 7) { if (bp == "B") { bp = "P"; } else { go = false; } } } setTimeout(function() { exchangeGear(bp, go); }, 1000); } else { console.log("완료!"); } } exchangeGear("B", true); })();
